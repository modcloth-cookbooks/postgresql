listen_addresses                     = '<%= node[:postgresql][:listen_addresses] %>,127.0.0.1'
port                                 = 5432
max_connections                      = <%= node[:postgresql][:max_connections] %>

shared_buffers                       = <%= node[:postgresql][:shared_buffers] %>

log_timezone                         = 'UTC'
datestyle                            = 'iso, mdy'
timezone                             = 'UTC'

lc_messages                          = 'en_US.UTF-8'
lc_monetary                          = 'en_US.UTF-8'
lc_numeric                           = 'en_US.UTF-8'
lc_time                              = 'en_US.UTF-8'

default_text_search_config           = 'pg_catalog.english'

<% if node[:postgresql][:replication_master_enable].eql?("yes") %>
wal_level                            = hot_standby
wal_keep_segments                    = 32
max_wal_senders                      = 2
archive_mode                         = on
archive_command                      = 'rsync -ap %p postgres@<%= node[:postgresql][:replication_standby_hostname] %>:/var/pgsql/wals/%f < /dev/null'
<% end %>
<% if node[:postgresql][:replication_standby_enable].eql?("yes") %>
wal_level                            = hot_standby
hot_standby                          = on
<% end %>

